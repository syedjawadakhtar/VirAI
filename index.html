<!DOCTYPE html>
<html amalgamId="3f1a9de9-1b07-4b3a-9b0c-7e1b9e1b9e1b" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="logo.ico">
    <title>Aitofresh-Chat with Ollama</title>
    <link rel="stylesheet" href="style.css">
    <link href="prism/prism.css" rel="stylesheet" />
    <link href="katex/katex.min.css" rel="stylesheet" />
    <style>
        #end {
    margin-top: 20px;
}

.kiosk-info {
    display: flex;
    justify-content: space-between; /* Or space-evenly, if you prefer */
    align-items: center;
    padding: 15px 30px;
    font-size: 16px;
    color: #333;
    background-color: #f2f2f2; /* Optional: light background */
    flex-wrap: wrap; /* Allows wrapping on smaller screens */
    gap: 15px;
    width: 100%;
    box-sizing: border-box;
}

.kiosk-info p {
    margin: 0;
    white-space: nowrap; /* Prevents text from breaking into multiple lines */
}
        .social-link {
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            color: #333;
            transition: color 0.3s ease, transform 0.3s ease;
        }
        .social-link:hover {
            color: #007bff;
            transform: scale(1.05);
        }
        .social-link img {
            width: 28px;
            height: 28px;
            vertical-align: middle;
        }
        .social-link span {
            font-weight: 500;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <script src="prism/prism.js"></script>
    <h1>AitoFresh</h1>

    <div class="main-container">
        <div id="canvas-container">
            <canvas id="canvas"></canvas>
        </div>
        <div class="voice-container">
            <div class="welcome-message">
                <h2>Welcome to AitoFresh!</h2>
                <p>Press the microphone to start recording, then stop to send your order.</p>
            </div>
            <div id="response-display" class="response-display">
                <p>Waiting for your speech...</p>
            </div>
            <div class="voice-controls">
                <button id="mic-button" class="mic-button" aria-label="Start voice recording">
                    <svg class="mic-icon" viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M12 2a3 3 0 0 1 3 3v6a3 3 0 0 1-6 0V5a3 3 0 0 1 3-3z"/>
                        <path fill="currentColor" d="M19 10v1a7 7 0 0 1-14 0v-1a1 1 0 0 1 2 0v1a5 5 0 0 0 10 0v-1a1 1 0 0 1 2 0z"/>
                        <path fill="currentColor" d="M11 20v2a1 1 0 0 0 2 0v-2h1a1 1 0 0 0 0-2h-4a1 1 0 0 0 0 2h1z"/>
                    </svg>
                    Start Recording
                </button>
                <button id="stop-mic-button" class="stop-button" disabled aria-label="Stop and send recording">
                    <svg class="stop-icon" viewBox="0 0 24 24" width="24" height="24">
                        <rect fill="currentColor" x="6" y="6" width="12" height="12" rx="2"/>
                    </svg>
                    Stop & Send
                </button>
            </div>
            <div id="status" class="status">Status: Initializing...</div>
        </div>
        <div class="chat-container" style="display: none;">
            <button id="hamburger-menu" class="hamburger-menu" aria-label="Toggle settings menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div id="ollama-settings-sidebar" class="ollama-settings-sidebar hidden">
                <div class="ollama-settings">
                    <div>
                        <label for="ollama-server-url">Ollama Server URL:</label>
                        <input type="text" id="ollama-server-url" value="http://localhost:11434">
                    </div>
                    <div>
                        <label for="ollama-model-name">Ollama Model:</label>
                        <input type="text" id="ollama-model-name" value="llama3:8b">
                        <small>(e.g., llama3:8b, codellama:7b, mistral:latest)</small>
                    </div>
                    <div>
                        <label for="ollama-system-prompt">System Prompt</label>
                        <textarea id="ollama-system-prompt" rows="10" placeholder="e.g., You are a helpful AI assistant. Format math using LaTeX. Ingredients and steps should be in list format."></textarea>
                        <button id="set-system-prompt-button" class="settings-button">Set Prompt</button>
                    </div>
                </div>
            </div>
            <div id="chat-history">
                <!-- Chat messages will appear here -->
            </div>
            <div id="chat-input-area">
                <textarea id="user-input" placeholder="Type your message..." rows="2"></textarea>
                <button id="send-button">Send</button>
                <button id="stop-button" style="display: none;">Stop</button>
            </div>
            <div id="status">Status: Initializing...</div>
        </div>
    </div>
    <div id="error-log" class="error-log"></div>
    <div id="end">
        <div class="kiosk-info">
            <p>üçΩÔ∏è Fresh Poke Bowls ‚Ä¢ Helsinki ‚Ä¢ AI-Powered Service</p>
            <p class="help-text">Need help? Speak naturally - I understand English and Finnish (Beta)!</p>
            <p>Made with ‚ô•Ô∏è By <a href="https://github.com/syedjawadakhtar/VirAI">Team VirAI</a></p>
        </div>
    </div> 
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@6.5.10/dist/browser/pixi.min.js"></script>
    <script src="./sdk/live2dcubismcore.min.js"></script>
    <script src="./sdk/live2d.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display@0.4.0/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module" src="script.js"></script>
    <script src="chat.js"></script>
    <script src="voice.js"></script>
</body>
</html>
